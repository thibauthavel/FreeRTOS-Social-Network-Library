\chapter{Design of the library}


%---------------------------------------------------------------
\section{Functional design}

\subsection{Interactions with Twitter}

\hspace{15mm}Basically, the final library should allow a developer to do:
\begin{itemize}
\item To authenticate its application to Twitter. 
\item To send tweets on Twitter.
\item To receive tweets from Twitter.
\end{itemize}

And these features have to work whatever the operating system and the hardware architecture.

I chose to do not implement any storing proprieties because it is not flexible enough to let the developer chose the way he wants to store tweets.


\subsection{Easy layer to user}

\hspace{15mm}This library has to be a user-friendly layer. The developer does not have to know how OAuth works to build its own application to access to Twitter. He just have to give the basic informations about the registered application (the public and secret key provided by Twitter) and informations about its Twitter account (the login and password).

The first main functionality is the authentication process which gathers all OAuth operations and returns an authentication entity (for instance, typed as a C structure) which could be use by the developer in a further step to send and to receive tweets. This entity contains every required informations needed to allow OAuth to connect to Twitter. 

The send functionality is one of the two behaviours which could use the authentication entity in order to send a tweet on a Twitter profile.

Finally, the receive functionality use the authentication entity as well in order to receive tweets from a Twitter account's \textbf{timeline}\footnote{The timeline is the part of a Twitter profile which contains all tweets sent by a user.}. This functionality include parsing functions which allows to return a set of tweets entities. 
% To be developed

Each functionalities is represented by a single function. Nevertheless, the content of a functionality could be split into several operation each represented by another function.



%---------------------------------------------------------------
\section{Implementation design}


\subsection{Functions implementations}

% Describe relevant behaviours of each functionalities:
% - Authentication using OAuth HTTP post/get.
% - Send tweet using the authentication structure.
% - Receiving tweet using my own parsing functions, etc.

\hspace{15mm}Every steps of the authentication process are gather into the main authentication function. Basically each use of the OAuth library for a specific stage of the synchronisation is surrounded by a set of operations, for this very reason each stage is defined into a distinctive function. As explained above in the chapter \ref{chap:research} (\nameref{chap:research}), to authenticate an application to Twitter and then be able to access to the timeline or to send a tweet is simple but it required few steps:
\begin{itemize}
\item 1- Request token: it requests the first token to the Twitter service provider.
\item 2- Direct token: it requests the token needed to obtain user authorization.
\item 3- Verifier: it uses the direct token in order to request the PIN code (or verifier). 
\item 4- Access token: it uses the verifier to request the final token which will be use to send or receive tweets.
\end{itemize}
This main function gives to the user an authentication entity, that is the one he provides to the behaviours functions (send and receive).






\subsection{Diagram of the library}

% - UML-like representation of the way it will work



\clearpage